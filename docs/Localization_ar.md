# الترجمة والتوطين

<!-- #BEGIN LANGUAGE_SWITCHER -->
**English** | [中文](Localization_zh.md)
<!-- #END LANGUAGE_SWITCHER -->

يوفر HMCL دعم الترجمة والتوطين للعديد من اللغات.

يصف هذا المستند حالة دعم HMCL لهذه اللغات ويوفر دليلاً للمساهمين الذين يرغبون في المساعدة في ترجمة HMCL.

## اللغات المدعومة

حاليًا، يدعم HMCL اللغات التالية:

| اللغة                  | وسم اللغة    | مفتاح الترجمة المفضل        | لاحقة ملف الترجمة المفضلة      | [ملفات لغة اللعبة](https://minecraft.wiki/w/Language) | حالة الدعم   | المتطوعون                                 |
|-----------------------|--------------|----------------------------|-------------------------------|--------------------------------------------------------|--------------|-------------------------------------------|
| الإنجليزية            | `en`         | `default`                  | (فارغ)                        | `en_us`                                                | **أساسي**    | [Glavo](https://github.com/Glavo)         |
| الإنجليزية (مقلوبة)   | `en-Qabs`    | `en-Qabs`                  | `en_Qabs`                     | `en_ud`                                                | تلقائي       |                                           |
| الصينية (المبسطة)     | `zh-Hans`    | `zh`                       | `_zh`                         | `zh_cn`                                                | **أساسي**    | [Glavo](https://github.com/Glavo)         |
| الصينية (التقليدية)   | `zh-Hant`    | `zh-Hant`                  | `_zh_Hant`                    | `zh_tw` <br/> `zh_hk`                                  | **أساسي**    | [Glavo](https://github.com/Glavo)         |
| الصينية (الكلاسيكية)  | `lzh`        | `lzh`                      | `_lzh`                        | `lzh`                                                  | ثانوي        |                                           |
| اليابانية             | `ja`         | `ja`                       | `_ja`                         | `ja_jp`                                                | ثانوي        |                                           |
| الإسبانية             | `es`         | `es`                       | `_es`                         | `es_es`                                                | ثانوي        | [3gf8jv4dv](https://github.com/3gf8jv4dv) |
| الروسية               | `ru`         | `ru`                       | `_ru`                         | `ru_ru`                                                | ثانوي        | [3gf8jv4dv](https://github.com/3gf8jv4dv) |
| الأوكرانية            | `uk`         | `uk`                       | `_uk`                         | `uk_ua`                                                | ثانوي        |                                           |

<details>
<summary>حول وسوم اللغة</summary>

يستخدم HMCL وسوم اللغة المتوافقة مع معيار IETF BCP 47.

عند اختيار وسوم اللغة، نتبع هذه المبادئ:

1. بالنسبة للغات المُعرّفة في معيار ISO 639، إذا كان الوسم مسجلاً بالفعل في [سجل الوسوم الفرعية للغة IANA](https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry)،
   فإننا نستخدم دائمًا الوسم المسجل.

   على سبيل المثال، بالنسبة للغة الإنجليزية، نستخدم `en` بدلاً من `eng` كرمز اللغة.

2. بالنسبة للغات غير القياسية المُعرّفة بواسطة Minecraft، يجب تفضيل الرمز المُعرّف في `language.code` في ملف اللغة على اسم ملف لغة اللعبة.

   هذا لأن Minecraft أحيانًا يستخدم رموز الدول/المناطق الحقيقية لتمثيل لغات المزاح
   (على سبيل المثال، الإنجليزية القرصانية تستخدم ملف اللغة `en_pt`، لكن `PT` هو في الواقع رمز البرتغال).

   على سبيل المثال، بالنسبة للإنجليزية المقلوبة، نستخدم `en-Qabs` كرمز اللغة بدلاً من `en-UD`.

</details>

<details>
<summary>حول مفاتيح الترجمة ولواحق الملفات</summary>

تُستخدم لواحق ملفات الترجمة والمفاتيح لتسمية [موارد الترجمة](#موارد-الترجمة).

بشكل عام، مفتاح الترجمة هو رمز اللغة للمورد، ويتم الحصول على لاحقة ملف الترجمة باستبدال `-` بـ `_` في رمز اللغة وإضافة شرطة سفلية في البداية.

كحالة خاصة، بالنسبة للموارد الافتراضية، مفتاح الترجمة هو `default` واللاحقة فارغة.

بسبب وجود [آلية الرجوع للموارد](#آلية-الرجوع-للموارد)،
إذا لم يكن هناك مورد يطابق اللغة المحلية الحالية تمامًا،
سيشتق HMCL قائمة بحث من وسم اللغة الحالي ويبحث عن الموارد بالترتيب.

نوصي دائمًا بتوفير مورد افتراضي (بمفتاح `default` ولاحقة فارغة) عند توفير موارد الترجمة،
لضمان أن جميع المستخدمين يمكنهم تحميل الموارد بشكل صحيح.

نوصي أيضًا باستخدام وسوم لغة أوسع لموارد الترجمة كلما أمكن ذلك،
حتى يقل احتمال رجوع المستخدمين إلى المورد الافتراضي.

على سبيل المثال، إذا قدمت مورد ترجمة للصينية المبسطة،
نوصي باستخدام `zh` كمفتاح ترجمة بدلاً من `zh-Hans` الأكثر تحديدًا،
حتى ينطبق على جميع المستخدمين الصينيين ويتجنب الرجوع إلى المورد الافتراضي بالنسبة لهم.

إذا كنت تريد توفير موارد للصينية المبسطة والتقليدية معًا،
يُوصى باستخدام `zh` الأوسع كمفتاح للمورد الذي لديه مستخدمين أكثر (كمورد صيني افتراضي)،
واستخدام `zh-Hans`/`zh-Hant` الأكثر تحديدًا كمفتاح للمورد الذي لديه مستخدمين أقل.

</details>

يتطلب HMCL من جميع طلبات الدمج التي تحدّث الوثائق وموارد الترجمة أن تحدّث أيضًا الموارد
لجميع اللغات المدعومة **الأساسية**.
إذا لم يكن مؤلف PR على دراية باللغات ذات الصلة، يمكنه طلب المساعدة في الترجمة في التعليقات،
وسيساعد المشرفون في ترجمة هذه النصوص قبل دمج PR.

بالنسبة للغات المدعومة **الثانوية**، لا يمكننا ضمان تحديث موارد الترجمة هذه دائمًا بشكل متزامن.
نحتاج إلى متعاونين يتقنون هذه اللغات للمساعدة في الصيانة.

سنسجل المتطوعين الراغبين في المساعدة في صيانة موارد هذه اللغات في الوثائق.
إذا أراد المساهمون ترجمة نصوص الترجمة الجديدة إلى هذه اللغات في الوقت المناسب،
يمكنهم الإشارة @ إلى هؤلاء المتطوعين في PR لطلب المساعدة.

إذا كنت على استعداد للمساعدة في صيانة موارد الترجمة لأي لغة، يرجى فتح PR
وإضافة اسم مستخدم GitHub الخاص بك إلى قائمة المتطوعين أعلاه.
نقدر مساعدتك كثيرًا.

## إضافة دعم للغة جديدة

يرحب HMCL بأي شخص للمشاركة في الترجمة والمساهمة.
ومع ذلك، فإن صيانة الترجمات للمزيد من اللغات يتطلب المزيد من جهد الصيانة، لذلك لدينا بعض المتطلبات للغات المضافة حديثًا.
يرجى تأكيد المتطلبات التالية قبل المساهمة:

- نعطي الأولوية [للغات المدعومة رسميًا بواسطة Minecraft](https://minecraft.wiki/w/Language).

  ما لم تكن هناك أسباب خاصة، فإننا لا نوفر دعمًا للغات التي لم يدعمها Minecraft بعد.
- نأمل في توفير دعم صيانة طويل الأمد لجميع اللغات.

  نظرًا لأن مشرفي هذا المشروع يتقنون عددًا محدودًا فقط من اللغات،
  لتجنب أن يصبح دعم اللغات الجديدة قديمًا بسرعة بسبب نقص المشرفين،
  نأمل في العثور على أشخاص يتقنون اللغة لمساعدتنا في صيانة ملفات الترجمة المضافة حديثًا على المدى الطويل.
  إذا كان هناك احتمال لنقص المشرفين على المدى الطويل، سنكون أكثر حذرًا بشأن إضافة دعم لتلك اللغة.

نوصي المساهمين بتقديم [طلب ميزة](https://github.com/HMCL-dev/HMCL/issues/new?template=feature.yml) قبل توفير ترجمة لغة جديدة،
والمناقشة مع المساهمين الآخرين أولاً، وتحديد خطة الصيانة المستقبلية قبل البدء في عمل الترجمة.

### البدء بالترجمة

إذا كنت تريد إضافة دعم للغة جديدة إلى HMCL، يرجى البدء بترجمة [`I18N.properties`](../HMCL/src/main/resources/assets/lang/I18N.properties).
الغالبية العظمى من نصوص HMCL موجودة في هذا الملف، وترجمته ستترجم الواجهة بأكملها.

هذا ملف Java Properties، وهو بسيط جدًا في التنسيق.
قبل الترجمة، يرجى قراءة المقدمة لهذا التنسيق: [Properties file](https://en.wikipedia.org/wiki/.properties).

كخطوة أولى للترجمة، يرجى البحث عن وسم اللغة المكون من حرفين أو ثلاثة أحرف للغتك في [هذا الجدول](https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry).
على سبيل المثال، وسم اللغة للإنجليزية هو `en`.

بعد تحديد وسم اللغة، يرجى إنشاء ملف باسم `I18N_<localization file suffix>.properties` (مثل `I18N_en.properties`) بجوار [ملف `I18N.properties`](../HMCL/src/main/resources/assets/lang).
ثم يمكنك البدء في الترجمة في هذا الملف.

يتبع ملف `I18N.properties` [آلية الرجوع للموارد](#آلية-الرجوع-للموارد) للبحث عن الترجمات المفقودة.
أي يمكنك الترجمة إدخالاً تلو الآخر، وأي إدخالات غير مترجمة سترجع تلقائيًا إلى الإنجليزية.

بعد ترجمة جزء من الملف، يمكنك [بناء HMCL بنفسك](./README.md#compilation)،
وستُدرج ترجماتك في HMCL المترجم.
إذا لم تكن البيئة الافتراضية لجهازك هي اللغة المستهدفة،
يمكنك تعيين متغير البيئة `HMCL_LANGUAGE` لوسم اللغة الذي وجدته للتو من الجدول،
وسيتحول HMCL تلقائيًا إلى تلك اللغة.

في هذه المرحلة، يمكنك دفع الملف إلى GitHub وإرسال PR إلى HMCL.
سيكمل مشرفو HMCL الخطوات المتبقية لك.

## موارد الترجمة

جميع ملفات الوثائق وموارد الترجمة تتبع قاعدة التسمية `<resource name><localization file suffix>.<extension>`.

على سبيل المثال، بالنسبة لـ `README.md`، تُسمى النسخ المترجمة بلغات مختلفة على النحو التالي:

- الإنجليزية: `README.md`
- الصينية (المبسطة): `README_zh.md`
- الصينية (التقليدية): `README_zh_Hant.md`
- الصينية (الكلاسيكية): `README_lzh.md`

بالإضافة إلى الملفات المترجمة، يدعم HMCL أيضًا ترجمة حقول نصية معينة في JSON. النص المترجم في JSON يستخدم التنسيق التالي:
```json5
{
    "<Localization Key 1>": "<Localized Text 1>",
    "<Localization Key 2>": "<Localized Text 2>",
    // ...
    "<Localization Key N>": "<Localized Text N>"
}
```

على سبيل المثال، بالنسبة لحقل النص التالي:
```json
{
    "meow": "Meow"
}
```

يمكن إعادة كتابته كنص مترجم:
```json
{
    "meow": {
        "default": "Meow",
        "zh": "喵呜",
        "zh-Hant": "喵嗚"
    }
}
```

## آلية الرجوع للموارد

بالنسبة للموارد المفقودة بلغة معينة، يدعم HMCL آلية رجوع للموارد،
والتي تشتق قائمة بحث بناءً على وسوم اللغة المختلفة وتبحث عن الموارد بالترتيب وفقًا لهذه القائمة.

قبل البحث، نحسّن أولاً وسم اللغة من خلال الخطوات التالية.

1. توحيد رموز اللغة

   إذا لم يكن الوسم الفرعي لرمز اللغة في وسم اللغة الحالي مسجلاً في سجل الوسوم الفرعية للغة IANA،
   سيحاول HMCL تعيينه إلى وسم مسجل.

   على سبيل المثال، سيستبدل HMCL رمز اللغة `eng` بـ `en`.

2. تعيين اللغات الكلية إلى اللغات الفردية

   إذا كان رمز اللغة الحالي هو [لغة كلية ISO 639](https://en.wikipedia.org/wiki/ISO_639_macrolanguage)،
   وعادة ما تشير اللغة الكلية إلى لغة فردية محددة، سيستبدلها HMCL بتلك اللغة الفردية.

   على سبيل المثال، `zh` (الصينية) عادةً ما يشير فعليًا إلى `cmn` (الماندرين)، لذا نستبدل رمز اللغة `zh` بـ `cmn`.

3. اشتقاق الخط

   إذا لم يحدد وسم اللغة الحالي خطًا، سيحاول HMCL اشتقاق الخط وفقًا للقواعد التالية بالترتيب:

    1. إذا حدد وسم اللغة الحالي متغيرًا، وكان المتغير مسجلاً في سجل الوسوم الفرعية للغة IANA،
       وكانت جميع إدخالات `Prefix` الخاصة به في السجل تحتوي على نفس الخط، فقم بتعيين الخط الحالي إلى ذلك الخط.

       على سبيل المثال، إذا كان المتغير الحالي هو `pinyin` (الصينية بالبينيين)، سيتم تعيين الخط إلى `Latn` (اللاتينية).

    2. إذا كان رمز اللغة الحالي مُعيّنًا `Suppress-Script` في سجل الوسوم الفرعية للغة IANA، فقم بتعيين الخط الحالي إلى ذلك الخط.

       على سبيل المثال، إذا كان رمز اللغة الحالي هو `en` (الإنجليزية)، سيتم تعيين الخط إلى `Latn` (اللاتينية)؛
       إذا كان الرمز هو `ru` (الروسية)، سيتم تعيين الخط إلى `Cyrl` (السيريلية).

    3. إذا كان رمز اللغة الحالي هو `lzh` (الصينية الكلاسيكية)، فقم بتعيين الخط إلى `Hant` (الأحرف الصينية التقليدية).

    4. إذا كان رمز اللغة الحالي هو `zh` أو لغة فرعية من `zh`، تحقق مما إذا كان رمز المنطقة الحالي أحد `TW` أو `HK` أو `MO`.
       إذا كان صحيحًا، فقم بتعيين الخط إلى `Hant` (الأحرف الصينية التقليدية)؛
       وإلا فقم بتعيينه إلى `Hans` (الأحرف الصينية المبسطة).

بعد تحسين رمز اللغة، سيشتق HMCL قائمة بوسوم اللغة بناءً على وسم اللغة هذا.

على سبيل المثال، بالنسبة لوسم اللغة `en-US`، سيحسنه HMCL إلى `en-Latn-US` ويشتق قائمة البحث التالية:

1. `en-Latn-US`
2. `en-Latn`
3. `en-US`
4. `en`
5. `und`

بالنسبة لوسم اللغة `zh-CN`، سيحسنه HMCL إلى `cmn-Hans-CN` ويشتق قائمة البحث التالية:

1. `cmn-Hans-CN`
2. `cmn-Hans`
3. `cmn-CN`
4. `cmn`
5. `zh-Hans-CN`
6. `zh-Hans`
7. `zh-CN`
8. `zh`
9. `und`

بالنسبة للموارد التي يمكن دمجها (مثل ملفات `.properties`)،
سيدمج HMCL الموارد وفقًا لأولوية هذه القائمة؛ بالنسبة للموارد التي يصعب دمجها (مثل ملفات الخطوط)،
سيحمّل HMCL المورد الأعلى أولوية الذي تم العثور عليه في هذه القائمة.

إذا كانت اللغة الحالية تستخدم رمز ISO 639 مكونًا من ثلاثة أحرف، ولكن يوجد أيضًا رمز مكون من حرفين مقابل،
سيعيّنه HMCL إلى الرمز المكون من حرفين قبل البحث عن الموارد.

على سبيل المثال، إذا كان وسم لغة البيئة الحالية هو `eng-US`,
سيعيّنه HMCL إلى `en-US` ثم يبحث عن موارد الترجمة وفقًا للقواعد المذكورة أعلاه.

### قواعد إضافية للصينية

يضيف HMCL دائمًا `zh-CN` إلى قائمة البحث لجميع البيئات الصينية،
ويضيف `zh-TW` إلى قائمة البحث لجميع بيئات الصينية التقليدية.

فيما يلي قوائم البحث عن موارد الترجمة لعدة بيئات صينية شائعة.

- `zh-CN`:
    1. `cmn-Hans-CN`
    2. `cmn-Hans`
    3. `cmn-CN`
    4. `cmn`
    5. `zh-Hans-CN`
    6. `zh-Hans`
    7. `zh-CN`
    8. `zh`
    9. `und`
- `zh-SG`:
    1. `cmn-Hans-SG`
    2. `cmn-Hans`
    3. `cmn-SG`
    4. `cmn`
    5. `zh-Hans-SG`
    6. `zh-Hans`
    7. `zh-SG`
    8. `zh-CN`
    9. `zh`
    10. `und`
- `zh-TW`:
    1. `zh-Hant-TW`
    2. `zh-Hant`
    3. `zh-TW`
    4. `zh`
    5. `zh-CN`
    6. `und`
- `zh-HK`:
    1. `cmn-Hant-HK`
    2. `cmn-Hant`
    3. `cmn-HK`
    4. `cmn`
    5. `zh-Hant-HK`
    6. `zh-Hant`
    7. `zh-HK`
    8. `zh-TW`
    9. `zh`
    10. `zh-CN`
    11. `und`
- `lzh`:
    1. `lzh-Hant`
    2. `lzh`
    3. `zh-Hant`
    4. `zh-TW`
    5. `zh`
    6. `zh-CN`
    7. `und`

## المزامنة التلقائية لمحتوى الوثائق

<!-- #BEGIN BLOCK -->
<!-- #PROPERTY PROCESS_LINK=false -->
لتبسيط صيانة الوثائق، يستخدم HMCL آلية الماكرو للحفاظ تلقائيًا على أجزاء من محتوى الوثائق.
قم بتشغيل الأمر التالي في الطرفية:
```bash
./gradlew updateDocuments
```

سيؤدي هذا إلى تحديث جميع محتويات الوثائق تلقائيًا.

على سبيل المثال، لإنشاء روابط للتبديل بين إصدارات اللغات المختلفة لنفس المستند،
أضف المحتوى التالي تحت عنوان المستند:
```markdown
<!-- #BEGIN LANGUAGE_SWITCHER -->
<!-- #END LANGUAGE_SWITCHER -->
```

بعد تشغيل `./gradlew updateDocuments`، سيتم استبدال هذين السطرين تلقائيًا بروابط مبدّل اللغة مثل التالي:
```markdown
**English** (**Standard**, [uʍoᗡ ǝpᴉsd∩](README_en_Qabs.md)) | 中文 ([简体](README_zh.md), [繁體](README_zh_Hant.md), [文言](README_lzh.md)) | [日本語](README_ja.md) | [español](README_es.md) | [русский](README_ru.md) | [українська](README_uk.md)
```

لمزيد من المعلومات حول الماكرو، راجع [MacroProcessor.java](../buildSrc/src/main/java/org/jackhuang/hmcl/gradle/docs/MacroProcessor.java).
<!-- #END BLOCK -->